{% extends "base.html" %}
{% load static %}

{% block content %}

<!-- index.html content starts here -->



  
<div class="col-12, col-md-3 mb-md-5 mb-3">
    <p class="text-center-align">
      <strong aria-live="polite">Hello {{ user }}</strong>
      </p>
    <h1 class="dashboard-heading" aria-level="1">Tasks</h1>

    <p class="text-center-align">Manage your tasks</p>
    <a href="{% url 'create' %}" class="btn btn-primary btn-lg btn-style col-12 ">Add New</a>
  </div>



  <!-- Task Entries Column -->
  <div class="container-fluid mb-5">
    <div class="row">

      {% for task in tasks %}
      {% if task.user_name == request.user %}


      <div class="card card-style col-md-5 col-lg-3 col-12 m-1 p-0 shadow">
        <div class="card-body ">
          <div class="d-flex mb-2">
            <div class="col-4">
              <p class="percentage mb-0">{{task.progress}}%</p>
              <p class="card-text text-bottom">{{task.get_status_display}}</p>
            </div>
            <div class="col-8">
              <p class="card-title mb-1">{{task.task_name}}</p>
              <p class="card-text">{{task.get_priority_display}} priority</p>
              <p class="card-text time-text">{{task.start_time}}</p>
            </div>

          </div>
          <p class="card-text">{{task.description | truncatechars:100}}</p>

          <div class="align-self-bottom">
            <a href="{% url 'delete' task.id %}" class="btn btn-outline-primary">Delete</a>
            <a href="{% url 'edit' task.id %} " class="btn btn-primary btn-style"> View </a>

          </div>

        </div>
      </div>

      {% endif %}
      {% endfor %}
    </div>
  </div>





<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>


{% endblock %}