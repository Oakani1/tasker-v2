{% extends "base.html" %}
{% load static %}

{% block content %}

<!-- index.html content starts here -->
<body>
<section  >

  <div class="col-12, col-md-4 mb-md-5 mb-3">
    <strong>Hello {{user}}</strong>
    <h1 class="dahsboard-heading">Tasks</h1>

    <p class="text-center-align">Manage your tasks</p>
    <a href="{% url 'create' %}" type="button" class="btn btn-primary btn-lg btn-style col-12 ">Add New</a>
  </div>



  <!-- Task Entries Column -->
  <div class="container-fluid mb-5">
    <div class="row">

      {% for task in tasks %}
      {% if task.user_name == request.user %}


      <div class="card card-style col-md-5 col-lg-3 col-12 m-1 p-0 shadow">
        <div class="card-body ">
          <div class="d-flex mb-2">
            <div class="col-4">
              <p class="card-text" id="percentage">{{task.progress}}%</p>
              <p class="card-text text-bottom">{{task.get_status_display}}</p>
            </div>
            <div class="col-8">
              <p class="card-title mb-1">{{task.task_name}}</p>
              <p class="card-text">{{task.get_priority_display}} priority</p>
              <p class="card-text" id="time-text">{{task.start_time}}</span></p>
            </div>

          </div>
          <p class="card-text">{{task.description | truncatechars:100}}</p>

          <div class="align-self-bottom">
            <a href="{% url 'delete' task.id %}" class="btn btn-outline-primary">Delete</a>
            <a href="{% url 'edit' task.id %}">
              <button type="button" class=" btn btn-primary btn-style">View</button>
            </a>

          </div>

        </div>
      </div>

      {% endif %}
      {% endfor %}
    </div>
  </div>



</section>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>

{% endblock %}